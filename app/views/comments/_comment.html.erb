<div id="<%= dom_id(comment) %>" class="group flex space-x-3 p-4 border-b border-gray-100 last:border-b-0 relative">
  <!-- Avatar -->
  <div class="flex-shrink-0">
    <%= link_to profile_path(comment.user), data: { turbo: false } do %>
      <%= avatar_for(comment.user, class: "h-8 w-8 rounded-full") %>
    <% end %>
  </div>

  <!-- Content -->
  <div class="flex-1 min-w-0">
    <div class="flex items-center justify-between">
      <div class="flex items-center space-x-2">
        <strong class="text-sm font-medium text-gray-900"><%= comment.user.full_name %></strong>
        <time class="text-xs text-gray-500"><%= time_ago_in_words(comment.created_at) %> ago</time>
      </div>

      <!-- Ellipsis Button -->
      <% if comment.user == current_user %>
        <div class="relative" data-controller="dropdown">
          <!-- Circular Hover Background -->
          <button type="button"
                  class="rounded-full text-gray-500 hover:bg-gray-100 hover:text-gray-700 focus:outline-none transition"
                  data-action="click->dropdown#toggle click@window->dropdown#hide"
                  aria-label="Comment options">
            <svg class="w-[16px] h-[16px]" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
              <path d="M12 13.75C12.9665 13.75 13.75 12.9665 13.75 12C13.75 11.0335 12.9665 10.25 12 10.25C11.0335 10.25 10.25 11.0335 10.25 12C10.25 12.9665 11.0335 13.75 12 13.75Z" />
              <path d="M19 13.75C19.9665 13.75 20.75 12.9665 20.75 12C20.75 11.0335 19.9665 10.25 19 10.25C18.0335 10.25 17.25 11.0335 17.25 12C17.25 12.9665 18.0335 13.75 19 13.75Z" />
              <path d="M5 13.75C5.9665 13.75 6.75 12.9665 6.75 12C6.75 11.0335 5.9665 10.25 5 10.25C4.0335 10.25 3.25 11.0335 3.25 12C3.25 12.9665 4.0335 13.75 5 13.75Z" />
            </svg>
          </button>

          <!-- Dropdown Menu -->
          <div class="absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg py-2 z-10 hidden border border-gray-100"
               data-dropdown-target="menu"
               role="menu"
               aria-orientation="vertical">
            <%= link_to "Edit",
                        "#",
                        class: "block px-4 py-2.5 text-sm text-gray-700 hover:bg-gray-50 hover:text-gray-900 transition rounded-md mx-1",
                        role: "menuitem" %>
            <div class="border-t border-gray-100 my-1"></div>
            <%= button_to "Delete",
                          post_comments_path(comment.post, comment),
                          method: :delete,
                          form: { turbo_confirm: "Are you sure?" },
                          class: "block w-full text-left px-4 py-2.5 text-sm text-red-600 hover:bg-red-50 hover:text-red-700 transition rounded-md mx-1",
                          role: "menuitem" %>
          </div>
        </div>
      <% end %>
    </div>

    <p class="mt-1 text-gray-800 text-sm leading-relaxed"><%= comment.content %></p>
  </div>
</div>