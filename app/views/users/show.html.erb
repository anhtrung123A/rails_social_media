<div class="max-w-2xl mx-auto mt-6 px-4 sm:px-6 lg:px-8">

  <!-- Profile Header -->
  <div class="flex flex-col sm:flex-row items-center sm:items-start gap-6 sm:gap-8 mb-8 pb-6 border-b border-gray-100">
    <!-- Avatar -->
    <div class="flex-shrink-0">
      <%= avatar_for(@user, class: "h-28 w-28 sm:h-32 sm:w-32 rounded-full object-cover border-4 border-white shadow-sm") %>
    </div>

    <!-- User Info -->
    <div class="text-center sm:text-left space-y-3 flex-1">
      <!-- Full Name -->
      <h1 class="text-2xl sm:text-3xl font-bold text-gray-900">
        <%= @user.full_name || @user.username %>
      </h1>

      <!-- Username -->
      <p class="text-[12px] text-gray-600 font-mono">
        @<%= @user.username %>
      </p>

      <!-- Bio -->
      <p class="text-[14px] text-gray-500">
        <%= @user.bio %>
      </p>
      <%= render partial: "users/followers_count", locals: { user: @user } %>

      <!-- Action Button -->
      <div class="pt-2">
        <% if current_user == @user %>
          <%= link_to "Edit Profile", edit_profile_path, class: "inline-block px-5 py-2 bg-gradient-to-r from-indigo-600 to-purple-600 text-white text-[12px] font-semibold rounded-full hover:bg-gray-800 transition shadow-sm leading-none" %>
        <% else %>
          <%= render partial: "users/follow_button", locals: { user: @user } %>
        <% end %>
      </div>

      <!-- Followers / Following -->
    </div>
  </div>

  <!-- Posts Feed -->
  <div id="posts-container" class="space-y-8">
    <%= turbo_frame_tag "posts" do %>
      <% if @posts.any? %>
        <%= render partial: "posts/post", collection: @posts, locals: { profile_view: true } %>
      <% else %>
        <div class="flex flex-col items-center justify-center py-20 text-center">
          <svg class="w-16 h-16 text-gray-300 mb-4" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M4 16l4.5-4.5L4 7m0 0l4.5 4.5M4 7h16m-8 8v4m0 0l-2-2m2 2l2-2" />
          </svg>
          <p class="text-gray-600 text-xl font-semibold">No posts yet</p>
          <% if current_user == @user %>
            <p class="text-gray-500 text-sm mt-2">Share your first thought with the world.</p>
            <%= link_to "Create your first post", new_post_path, class: "mt-5 inline-flex items-center px-5 py-3 bg-black text-white text-sm font-semibold rounded-full hover:bg-gray-800 transition shadow-md" %>
          <% else %>
            <p class="text-gray-500 text-sm mt-2"><%= @user.username %> hasnâ€™t posted anything yet.</p>
          <% end %>
        </div>
      <% end %>
    <% end %>

    <!-- Infinite Scroll Pagination -->
    <% if @posts.next_page %>
      <%= turbo_frame_tag "pagination", src: root_path(@user, page: @posts.next_page, format: :turbo_stream), loading: :lazy %>
    <% end %>
  </div>
</div>