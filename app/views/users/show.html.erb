<div class="max-w-4xl mx-auto mt-10 px-4 sm:px-6 lg:px-8">
  <div class="flex flex-col sm:flex-row items-center sm:items-start sm:space-x-8">
    <!-- Avatar -->
    <div class="flex-shrink-0">
      <%= avatar_for(@user, class: "h-32 w-32 rounded-full object-cover border-4 border-white shadow") %>
    </div>

    <!-- User Info -->
    <div class="mt-4 sm:mt-0 text-center sm:text-left">
      <h1 class="text-3xl font-bold text-gray-900">
        <%= @user.username %>
      </h1>

      <p class="text-sm text-gray-600 mt-1">
        <%= @user.email %>
      </p>

      <p class="text-sm text-gray-500 mt-1">
        Joined on <%= @user.created_at.strftime("%B %d, %Y") %>
      </p>
    <% if current_user == @user %>
        <div class="mt-4 sm:mt-2">
            <%= link_to "Edit Profile", edit_profile_path(current_user), class: "inline-block text-sm text-indigo-600 hover:text-indigo-800 font-medium" %>
        </div>
    <% else %>
        <div class="mt-4 sm:mt-2">
          <%= render partial: "users/follow_button", locals: { user: @user } %>
        </div>
    <% end %>
      <div class="mt-4 sm:mt-2">
        <%= render partial: "users/followers_followings_count", locals: { user: @user } %>
      </div>
    </div>
  </div>

  <!-- Post Feed with Turbo Frame + Infinite Scroll -->
  <div id="posts-container" class="mt-8">
    <%= turbo_frame_tag "posts" do %>
      <% if @posts.present? %>
        <%= render partial: "posts/post", collection: @posts %>
      <% else %>
        <div class="flex flex-col items-center justify-center py-16 text-center">
          <svg class="w-12 h-12 text-gray-400 mb-3" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 21H5a2 2 0 01-2-2V7a2 2 0 012-2h4l2-2h4l2 2h4a2 2 0 012 2v12a2 2 0 01-2 2z" />
          </svg>
          <p class="text-gray-600 text-lg font-semibold">No posts yet</p>
          <% if current_user == @user %>
            <p class="text-gray-500 text-sm mt-1">Start sharing your thoughts!</p>
            <%= link_to "Create your first post", new_post_path, class: "mt-4 inline-block px-4 py-2 bg-indigo-600 text-white text-sm font-medium rounded-lg shadow hover:bg-indigo-700 transition" %>
          <% else %>
            <p class="text-gray-500 text-sm mt-1"><%= @user.username %> hasnâ€™t posted anything yet.</p>
          <% end %>
        </div>
      <% end %>
    <% end %>

    <% if @posts.next_page %>
      <%= turbo_frame_tag "pagination", src: profile_path(page: @posts.next_page, format: :turbo_stream), loading: :lazy %>
    <% end %>
  </div>

</div>
